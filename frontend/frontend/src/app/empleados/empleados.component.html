<div class="empleados-page">
  <div class="page-header">
    <h1 class="page-title">Empleados</h1>
    <p class="page-subtitle">Gestión de personal de la papelería</p>
    <button class="btn btn-primary" (click)="mostrarFormulario = !mostrarFormulario">
      {{ mostrarFormulario ? 'Cancelar' : 'Agregar Empleado' }}
    </button>
  </div>

  <!-- Formulario para agregar empleado -->
  <div *ngIf="mostrarFormulario" class="form-container">
    <form [formGroup]="empleadoForm" (ngSubmit)="agregarEmpleado()" class="empleado-form">
      <h3>Nuevo Empleado</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="nombre">Nombre completo:</label>
          <input type="text" id="nombre" formControlName="nombre" class="form-control" placeholder="Ingrese el nombre completo">
        </div>
        
        <div class="form-group">
          <label for="dni">DNI:</label>
          <input type="text" id="dni" formControlName="dni" class="form-control" placeholder="12345678">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="correo">Correo electrónico:</label>
          <input type="email" id="correo" formControlName="correo" class="form-control" placeholder="empleado@papeleria.com">
        </div>
        
        <div class="form-group">
          <label for="rol">Rol:</label>
          <select id="rol" formControlName="rol" class="form-control">
            <option value="empleado">Empleado</option>
            <option value="admin">Administrador</option>
          </select>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="username">Usuario:</label>
          <input type="text" id="username" formControlName="username" class="form-control" placeholder="nombre_usuario">
        </div>
        
        <div class="form-group">
          <label for="password">Contraseña:</label>
          <input type="password" id="password" formControlName="password" class="form-control" placeholder="Mínimo 6 caracteres">
        </div>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn btn-success" [disabled]="empleadoForm.invalid || guardando">
          {{ guardando ? 'Guardando...' : 'Guardar Empleado' }}
        </button>
        <button type="button" class="btn btn-secondary" (click)="cancelarFormulario()">
          Cancelar
        </button>
      </div>
    </form>
  </div>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Cargando empleados...</p>
  </div>

  <div *ngIf="error" class="error-container">
    <div class="error-message">
      <p>{{ error }}</p>
      <button (click)="cargarEmpleados()" class="btn btn-error">Reintentar</button>
    </div>
  </div>

  <div *ngIf="!loading && !error" class="empleados-grid">
    <div *ngFor="let empleado of empleados" class="empleado-card">
      <div class="empleado-header">
        <div class="empleado-avatar">{{ empleado.nombre.charAt(0) }}</div>
        <div class="empleado-info">
          <h3>{{ empleado.nombre }}</h3>
          <span class="empleado-rol" [class]="'rol-' + empleado.rol">{{ empleado.rol }}</span>
        </div>
      </div>
      <div class="empleado-details">
        <div class="empleado-detail">
          <span class="label">DNI:</span>
          <span class="value">{{ empleado.dni }}</span>
        </div>
        <div class="empleado-detail">
          <span class="label">Email:</span>
          <span class="value">{{ empleado.correo }}</span>
        </div>
        <div class="empleado-detail">
          <span class="label">Estado:</span>
          <span class="value" [class]="empleado.activo ? 'activo' : 'inactivo'">
            {{ empleado.activo ? 'Activo' : 'Inactivo' }}
          </span>
        </div>
      </div>
      <div class="empleado-actions">
        <button class="btn btn-sm btn-outline" (click)="editarEmpleado(empleado)">Editar</button>
        <button class="btn btn-sm btn-danger" (click)="eliminarEmpleado(empleado.id)" 
                [disabled]="empleado.rol === 'admin'">
          Eliminar
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !error && empleados.length === 0" class="empty-state">
    <h3 class="empty-state-title">No hay empleados registrados</h3>
    <p class="empty-state-description">Aún no hay empleados en el sistema. Usa el botón "Agregar Empleado" para crear uno nuevo.</p>
  </div>
</div>
